<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="color-scheme" content="light" />
  <title>ARCBOS Ops Portal</title>

  <link rel="stylesheet" href="./css/main.css" />
</head>

<body data-page="dashboard">
  <header class="topbar">
    <div class="topbar__inner">
      <div class="brand">
        <div class="brand__mark" aria-hidden="true">A</div>
        <div class="brand__text">
          <div class="brand__title">ARCBOS Ops Portal</div>
          <div class="brand__sub">SnowBot Phase 1 • Audit-first • No backend</div>
        </div>
      </div>

      <nav class="nav">
        <a class="nav__link nav__link--active" href="./index.html">Dashboard</a>
        <a class="nav__link" href="./pages/bom.html">BOM Tree</a>
        <a class="nav__link" href="./pages/parts.html">Parts</a>
        <a class="nav__link" href="./pages/suppliers.html">Suppliers</a>
        <a class="nav__link" href="./pages/changes.html">Changes</a>
        <a class="nav__link" href="./pages/rules.html">Rules</a>
        <a class="nav__link" href="./pages/templates.html">Templates</a>
      </nav>

      <div class="meta">
        <div class="meta__item">
          <span class="muted">Last updated</span>
          <span id="lastUpdated" class="mono">—</span>
        </div>
        <div class="meta__item">
          <span class="muted">Data</span>
          <!-- app.js updates #dataStatus -->
          <span id="dataStatus" class="mono">—</span>
        </div>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <div>
        <h1 class="h1">Operational Truth, Not Slides.</h1>
        <p class="lead">
          This portal is a lightweight, audit-friendly system for managing BOM trees, parts, suppliers, and engineering changes.
          Data lives in version-controlled JSON files under <span class="mono">/data</span>.
        </p>
      </div>

      <div class="hero__actions">
        <a class="btn" href="./pages/bom.html">Open BOM Tree</a>
        <a class="btn btn--ghost" href="./pages/templates.html">Get Templates</a>
      </div>
    </section>

    <section class="grid grid--3">
      <div class="card">
        <div class="card__head">
          <div class="card__title">This week</div>
          <div class="pill" id="pillWeek">—</div>
        </div>
        <div class="kv">
          <div class="kv__row">
            <div class="kv__k muted">New changes</div>
            <div class="kv__v mono" id="kpiNewChanges">—</div>
          </div>
          <div class="kv__row">
            <div class="kv__k muted">ECO approved</div>
            <div class="kv__v mono" id="kpiEcoApproved">—</div>
          </div>
          <div class="kv__row">
            <div class="kv__k muted">Open ECR</div>
            <div class="kv__v mono" id="kpiOpenEcr">—</div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card__head">
          <div class="card__title">BOM health</div>
          <div class="badge" id="badgeBomHealth">—</div>
        </div>
        <div class="kv">
          <div class="kv__row">
            <div class="kv__k muted">Nodes</div>
            <div class="kv__v mono" id="kpiBomNodes">—</div>
          </div>
          <div class="kv__row">
            <div class="kv__k muted">High criticality</div>
            <div class="kv__v mono" id="kpiHighCrit">—</div>
          </div>
          <div class="kv__row">
            <div class="kv__k muted">Missing suppliers</div>
            <div class="kv__v mono" id="kpiMissingSuppliers">—</div>
          </div>
        </div>
        <div class="hint" id="bomHealthHint">—</div>
      </div>

      <div class="card">
        <div class="card__head">
          <div class="card__title">Top suppliers</div>
          <div class="muted small">Weighted score</div>
        </div>
        <div class="list" id="topSuppliers">
          <div class="skeleton">Loading…</div>
        </div>
      </div>
    </section>

    <section class="grid grid--2">
      <div class="card">
        <div class="card__head">
          <div class="card__title">Key risks</div>
          <div class="muted small">From suppliers + parts</div>
        </div>
        <div class="list" id="keyRisks">
          <div class="skeleton">Loading…</div>
        </div>
      </div>

      <div class="card">
        <div class="card__head">
          <div class="card__title">Recent changes</div>
          <div class="muted small">ECR/ECO</div>
        </div>
        <div class="list" id="recentChanges">
          <div class="skeleton">Loading…</div>
        </div>
      </div>
    </section>

    <section class="footerNote">
      <div class="callout">
        <div class="callout__title">Non-goals</div>
        <div class="callout__body">
          No accounts, no backend, no uploads, no private data ingestion.
          All edits happen via git commits to JSON files.
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container footer__inner">
      <div class="muted small">
        ARCBOS Ops Portal • Static site • Versioned data • Built for long-term maintainability
      </div>
      <div class="muted small mono" id="buildStamp">Build: static • Data: /data/*.json</div>
    </div>
  </footer>

  <!-- Core helpers -->
  <script src="./js/utils.js"></script>

  <!-- Data loader (must define window.arcbosDataLoadAll) -->
  <script src="./js/data.js"></script>

  <!-- Page renderers (must register window.ARCBOS_PAGES.dashboard) -->
  <script src="./js/dashboard.js"></script>

  <!-- App bootstrap (loads JSON + updates header meta + calls page renderer) -->
  <script src="./js/app.js"></script>
</body>
</html>
